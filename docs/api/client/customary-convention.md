---
title: 约定俗成
---

# 约定俗成

## 客户端仓库结构

所有需要分发的客户端仓库都应遵循以下结构：

* **根目录:**  客户端仓库的根目录应为 `server` 文件夹。
* **客户端代码:**  客户端代码 (例如 HTML, JavaScript, CSS 文件) 应放置在 `server` 文件夹下的 `exampleClient` 或 `Client` 文件夹中。
* **客户端设置:**  客户端的 `settings.json` 文件应提前在 `server/settings` 文件夹中创建好 (参见 [设置](/guide/setting) 部分)。
* **客户端所需依赖:**
  * 客户端所需的依赖库如果是纯浏览器环境的依赖，则可以直接放入`server/lib` 文件夹中，依赖的js文件最好是放在 `lib/<依赖库的名字>` 文件夹中。
  * 客户端所需的依赖库如果不适用于纯浏览器环境，即只能从 `node_modules` 中导入的依赖，则请一定要使用依赖库白名单中的依赖 (参见 [依赖白名单](dependences_whiteList))。如果的确有你想要使用但不在名单上的依赖，则请联系我们。

**示例目录结构:**

```
server/
├── dist/          (服务器代码)
├── settings/
│   ├── server_settings.json
│   └── your_client_id.json  (您的客户端设置文件)
├── exampleClient/   (或 Client/)
│     └── your_client_name  (你的客户端名字)
│       ├── index.html      (客户端入口文件)
│       ├── script.js       (客户端脚本)
│       ├── style.css       (客户端样式)
│       └── dependences.txt (依赖名单)
├── package.json
├── server.js
└── ...
```

这种结构的好处：

* **统一性:**  所有客户端都遵循相同的结构，便于管理和维护。
* **易用性:**  非程序员用户只需下载整个 `server` 文件夹，即可获得服务器和客户端的所有必要文件。
* **预配置:**  客户端的 `settings.json` 文件已提前配置好，用户无需手动修改。

## 依赖名单

为了清晰地管理客户端所需的依赖库，并确保服务器能够正确处理这些依赖，我们要求提供一个依赖清单文件。

* **文件名:** `dependences.txt`
* **位置:**  应放置在您的客户端的根目录下。
* **格式:** 纯文本文件，每行描述一个依赖库，使用分号分隔依赖库名称和版本信息。
* **数据结构:**

    ```
    <依赖库的名字>:<依赖库的版本信息>
    ```

    例如：

    ```
    socket.io-client:^4.7.2
    uuid:^9.0.1
    axios:1.6.7
    ```

    或

    ```
    socket.io-client:4.7.2
    uuid:9.0.1
    axios:latest
    ```

    或

    ```
    socket.io-client:4.7.x
    uuid:9.x
    ```

**重要说明:**

* **准确性:**  请务必提供准确的依赖库名称和版本信息。这对于服务器正确安装和管理依赖至关重要。
* **版本格式:**  版本信息应遵循 [npm](https://docs.npmjs.com/about-semantic-versioning) 的语义化版本规范 (SemVer)。您可以使用特定的版本号 (例如 `1.2.3`)、版本范围 (例如 `^1.2.0` 或 `>=2.0.0 <3.0.0`)，或其他有效的版本标识符 (例如 `latest`、`next` 或 `x` 通配符, 详情请参考[npm semver calculator](https://semver.npmjs.com/))。
* **分隔符:**  请使用英文冒号 (`:`) 作为分隔符。
* **换行:**  每个依赖库的信息应独占一行。
* **注释：** 暂不支持在`dependences.txt`中使用注释。

提供清晰、准确的依赖清单有助于：

* **简化安装:**  服务器可以自动安装客户端所需的依赖，无需手动干预。
* **避免冲突:**  明确的版本信息有助于避免依赖冲突。
* **可维护性:**  方便跟踪和更新客户端的依赖。
* **依赖检查：** 确保你的依赖在 [依赖白名单](dependences_whiteList) 中。如果你的依赖不在白名单中且无法用纯浏览器依赖替代，请联系我们。
